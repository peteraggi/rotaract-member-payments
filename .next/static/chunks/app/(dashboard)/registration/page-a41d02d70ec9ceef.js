(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{4584:function(e,r,t){Promise.resolve().then(t.bind(t,9226)),Promise.resolve().then(t.bind(t,3427))},3427:function(e,r,t){"use strict";t.d(r,{default:function(){return I}});var s=t(7437),n=t(4029),a=t(4027),l=t(1973),i=t(2595),d=t(2265),o=t(653),c=t(218),u=t(2835);let m=c.fC;c.ZA;let x=c.B4,h=d.forwardRef((e,r)=>{let{className:t,children:n,...a}=e;return(0,s.jsxs)(c.xz,{ref:r,className:(0,u.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[n,(0,s.jsx)(c.JO,{asChild:!0,children:(0,s.jsx)(o.jnn,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=c.xz.displayName;let f=d.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(c.u_,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(o.g8U,{})})});f.displayName=c.u_.displayName;let j=d.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(c.$G,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(o.v4q,{})})});j.displayName=c.$G.displayName;let p=d.forwardRef((e,r)=>{let{className:t,children:n,position:a="popper",...l}=e;return(0,s.jsx)(c.h_,{children:(0,s.jsxs)(c.VY,{ref:r,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...l,children:[(0,s.jsx)(f,{}),(0,s.jsx)(c.l_,{className:(0,u.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(j,{})]})})});p.displayName=c.VY.displayName,d.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(c.__,{ref:r,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",t),...n})}).displayName=c.__.displayName;let g=d.forwardRef((e,r)=>{let{className:t,children:n,...a}=e;return(0,s.jsxs)(c.ck,{ref:r,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(c.wU,{children:(0,s.jsx)(o.nQG,{className:"h-4 w-4"})})}),(0,s.jsx)(c.eT,{children:n})]})});g.displayName=c.ck.displayName,d.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(c.Z0,{ref:r,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=c.Z0.displayName;var N=t(9501),b=t(845),y=t(1115),v=t(1817),w=t(9376),C=t(9064);let R=y.Ry({fullName:y.Z_().min(2,"Full name is required").max(50),phoneNumber:y.Z_().regex(/^\+\d{10,15}$/,"Enter valid phone number with country code"),gender:y.Km(["Male","Female"]),clubName:y.Z_().min(2,"Club name is required").max(50),country:y.Z_().min(2,"Country is required").max(50),designation:y.Km(["REI Committee","REI Club Officer","President","District Officer","Club Member","Guest"]),district:y.Km(["District 9212","District 9213","District 9214","Other"]),shirtSize:y.Km(["S","M","L","XL","2XL"]),dietaryRestrictions:y.Km(["Vegetarian","Non Vegetarian"]),accommodation:y.Km(["Shared","Single (with Extra Cost)"])});function I(e){var r;let{session:t}=e,d=(0,w.useRouter)(),o=(0,N.cI)({resolver:(0,b.F)(R),defaultValues:{fullName:"",phoneNumber:"+256",gender:"Male",clubName:"",country:"Uganda",designation:"Club Member",district:"District 9213",shirtSize:"M",dietaryRestrictions:"Non Vegetarian",accommodation:"Shared"}}),c=o.formState.isSubmitting,u=async e=>{try{let r=await fetch("/api/register-member",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.error||"Registration failed. Please check your details and try again.");C.ZP.success("Registration successful!"),d.push("/registration/mine")}catch(r){C.ZP.dismiss(),console.error("Registration error:",r);let e="Registration failed. Please try again.";r instanceof Error&&(e=r.message,r.message.includes("phone_number")?e="This phone number is already registered. Please use a different number.":r.message.includes("email")?e="This email is already registered. Please login instead.":r.message.includes("validation")&&(e="Invalid data submitted. Please check your form entries.")),C.ZP.error(e)}};return(0,s.jsx)("div",{className:"min-h-screen bg-background text-foreground",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)(n.Zb,{className:"border-border",children:[(0,s.jsx)(n.Ol,{className:"border-b border-border",children:(0,s.jsxs)(n.ll,{className:"text-2xl font-bold text-card-foreground",children:["REI 25 Registration for ",null===(r=t.user)||void 0===r?void 0:r.email]})}),(0,s.jsx)(n.aY,{className:"pt-6",children:(0,s.jsx)(a.l0,{...o,children:(0,s.jsxs)("form",{onSubmit:o.handleSubmit(u),className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-card-foreground",children:"PERSONAL INFORMATION"}),(0,s.jsx)(a.Wi,{control:o.control,name:"fullName",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Full Name"}),(0,s.jsx)(a.NI,{children:(0,s.jsx)(l.I,{placeholder:"John Doe",...r})}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"phoneNumber",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Phone Number"}),(0,s.jsx)(a.NI,{children:(0,s.jsx)(l.I,{placeholder:"+256775xxxxxx",...r})}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"gender",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Gender"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select gender"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"Male",children:"Male"}),(0,s.jsx)(g,{value:"Female",children:"Female"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-card-foreground pt-4",children:"CLUB INFORMATION"}),(0,s.jsx)(a.Wi,{control:o.control,name:"clubName",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Club Name"}),(0,s.jsx)(a.NI,{children:(0,s.jsx)(l.I,{placeholder:"Rotaract Club of...",...r})}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"country",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Country"}),(0,s.jsx)(a.NI,{children:(0,s.jsx)(l.I,{placeholder:"Country",...r})}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"designation",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Designation"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select your position"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"REI Committee",children:"REI Committee"}),(0,s.jsx)(g,{value:"REI Club Officer",children:"REI Club Officer"}),(0,s.jsx)(g,{value:"President",children:"President"}),(0,s.jsx)(g,{value:"District Officer",children:"District Officer"}),(0,s.jsx)(g,{value:"Club Member",children:"Club Member"}),(0,s.jsx)(g,{value:"Guest",children:"Guest"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"district",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Rotary District"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select district"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"District 9212",children:"District 9212"}),(0,s.jsx)(g,{value:"District 9213",children:"District 9213"}),(0,s.jsx)(g,{value:"District 9214",children:"District 9214"}),(0,s.jsx)(g,{value:"Other",children:"Other"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-card-foreground pt-4",children:"EVENT PREFERENCES"}),(0,s.jsx)(a.Wi,{control:o.control,name:"shirtSize",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"T-Shirt Size"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select size"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"S",children:"S"}),(0,s.jsx)(g,{value:"M",children:"M"}),(0,s.jsx)(g,{value:"L",children:"L"}),(0,s.jsx)(g,{value:"XL",children:"XL"}),(0,s.jsx)(g,{value:"2XL",children:"2XL"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"dietaryRestrictions",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Dietary Restrictions"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select dietary preference"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"Vegetarian",children:"Vegetarian"}),(0,s.jsx)(g,{value:"Non Vegetarian",children:"Non Vegetarian"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(a.Wi,{control:o.control,name:"accommodation",render:e=>{let{field:r}=e;return(0,s.jsxs)(a.xJ,{children:[(0,s.jsx)(a.lX,{children:"Accommodation Preference"}),(0,s.jsxs)(m,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(a.NI,{children:(0,s.jsx)(h,{children:(0,s.jsx)(x,{placeholder:"Select accommodation"})})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(g,{value:"Shared",children:"Shared Room"}),(0,s.jsx)(g,{value:"Single (with Extra Cost)",children:"Single Room (with Extra Cost)"})]})]}),(0,s.jsx)(a.zG,{})]})}}),(0,s.jsx)(i.z,{type:"submit",className:"w-full py-5 mt-6 bg-gray-900 text-primary-foreground hover:bg-primary/90",disabled:c,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Registration"})]})})})]})})})}},4027:function(e,r,t){"use strict";t.d(r,{NI:function(){return j},Wi:function(){return u},l0:function(){return o},lX:function(){return f},xJ:function(){return h},zG:function(){return p}});var s=t(7437),n=t(2265),a=t(7053),l=t(9501),i=t(2835),d=t(6393);let o=l.RV,c=n.createContext({}),u=e=>{let{...r}=e;return(0,s.jsx)(c.Provider,{value:{name:r.name},children:(0,s.jsx)(l.Qr,{...r})})},m=()=>{let e=n.useContext(c),r=n.useContext(x),{getFieldState:t,formState:s}=(0,l.Gc)(),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},x=n.createContext({}),h=n.forwardRef((e,r)=>{let{className:t,...a}=e,l=n.useId();return(0,s.jsx)(x.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...a})})});h.displayName="FormItem";let f=n.forwardRef((e,r)=>{let{className:t,...n}=e,{error:a,formItemId:l}=m();return(0,s.jsx)(d._,{ref:r,className:(0,i.cn)(a&&"text-destructive",t),htmlFor:l,...n})});f.displayName="FormLabel";let j=n.forwardRef((e,r)=>{let{...t}=e,{error:n,formItemId:l,formDescriptionId:i,formMessageId:d}=m();return(0,s.jsx)(a.g7,{ref:r,id:l,"aria-describedby":n?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!n,...t})});j.displayName="FormControl",n.forwardRef((e,r)=>{let{className:t,...n}=e,{formDescriptionId:a}=m();return(0,s.jsx)("p",{ref:r,id:a,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",t),...n})}).displayName="FormDescription";let p=n.forwardRef((e,r)=>{let{className:t,children:n,...a}=e,{error:l,formMessageId:d}=m(),o=l?String(null==l?void 0:l.message):n;return o?(0,s.jsx)("p",{ref:r,id:d,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:o}):null});p.displayName="FormMessage"}},function(e){e.O(0,[310,852,64,996,909,78,226,971,117,744],function(){return e(e.s=4584)}),_N_E=e.O()}]);